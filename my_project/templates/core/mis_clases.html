{% extends 'core/base.html' %}

{% block title %}Mis Clases - QuizLet Anki{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">ğŸ‘¥ Mis Clases</h1>
    </div>
</div>

<!-- Clases donde soy DOCENTE -->
<div class="row mb-4">
    <div class="col-12">
        <h3>ğŸ“š Clases que Imparto (Docente)</h3>
        <a href="/admin/core/clase/add/" class="btn btn-success mb-3">â• Crear Nueva Clase</a>
    </div>
    
    {% if clases_docente %}
        {% for clase in clases_docente %}
        <div class="col-md-6 mb-3">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">{{ clase.nombre }}</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">{{ clase.descripcion }}</p>
                    
                    <p class="mb-2">
                        <strong>ğŸ‘¥ Alumnos:</strong> {{ clase.alumnos.count }}
                        <br>
                        <strong>ğŸ“‹ Tareas:</strong> {{ clase.tareas.count }}
                        <br>
                        <strong>ğŸ”‘ CÃ³digo:</strong> <span class="badge bg-success">{{ clase.codigo_invitacion }}</span>
                        <br>
                        <small class="text-muted">Creada: {{ clase.fecha_creacion|date:"d/m/Y" }}</small>
                    </p>
                    
                    <a href="{% url 'core:detalle_clase' clase.id %}" class="btn btn-primary btn-sm">
                        ğŸ‘ï¸ Ver Detalles
                    </a>
                    <a href="{% url 'core:progreso_clase' clase.id %}" class="btn btn-info btn-sm">
                        ğŸ“Š Ver Progreso
                    </a>
                    <a href="/admin/core/clase/{{ clase.id }}/change/" class="btn btn-secondary btn-sm">
                        âœï¸ Editar
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="col-12">
            <div class="alert alert-info">
                <h5>ğŸ“­ No tienes clases como docente</h5>
                <p>Crea tu primera clase para empezar a asignar tareas a tus alumnos.</p>
                <a href="/admin/core/clase/add/" class="btn btn-success">â• Crear Primera Clase</a>
            </div>
        </div>
    {% endif %}
</div>

<!-- Clases donde soy ALUMNO -->
<div class="row">
    <div class="col-12">
        <h3>ğŸ“ Clases en las que Estoy Inscrito (Alumno)</h3>
        <a href="{% url 'core:unirse_clase' %}" class="btn btn-primary mb-3">â• Unirse a una Clase</a>
    </div>
    
    {% if clases_alumno %}
        {% for clase in clases_alumno %}
        <div class="col-md-6 mb-3">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">{{ clase.nombre }}</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">{{ clase.descripcion }}</p>
                    
                    <p class="mb-2">
                        <strong>ğŸ‘¨â€ğŸ« Docente:</strong> {{ clase.docente.username }}
                        <br>
                        <strong>ğŸ“‹ Tareas:</strong> {{ clase.tareas.count }}
                        <br>
                        <small class="text-muted">Inscrito desde: {{ clase.fecha_creacion|date:"d/m/Y" }}</small>
                    </p>
                    
                    <a href="{% url 'core:detalle_clase' clase.id %}" class="btn btn-success btn-sm">
                        ğŸ‘ï¸ Ver Tareas
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="col-12">
            <div class="alert alert-warning">
                <h5>ğŸ“­ No estÃ¡s inscrito en ninguna clase</h5>
                <p>Ãšnete a una clase usando el cÃ³digo de invitaciÃ³n que te proporcionÃ³ tu profesor.</p>
                <a href="{% url 'core:unirse_clase' %}" class="btn btn-primary">â• Unirse a una Clase</a>
            </div>
        </div>
    {% endif %}
</div>

<!-- BotÃ³n para volver -->
<div class="row mt-4">
    <div class="col-12">
        <a href="{% url 'core:dashboard' %}" class="btn btn-outline-secondary">â† Volver al Dashboard</a>
    </div>
</div>
{% endblock %}